{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
<!--Carousel with three images-->
<div id="home-carousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#home-carousel" data-slide-to="0" class="active"></li>
        <li data-target="#home-carousel" data-slide-to="1"></li>
        <li data-target="#home-carousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="{{ MEDIA_URL }}hero_image1.png" class="d-block w-100" alt="Office supplies" />
            <div class="carousel-caption d-none d-md-block">
                <h4 class="font-weight-bold">John Smith</h4>
                <em>"Quick delivery, especially when you realise youre on the last batch of ink!"</em>
            </div>
        </div>
        <div class="carousel-item">
            <img src="{{ MEDIA_URL }}hero_image2.png" class="d-block w-100" alt="delivery van" />
            <div class="carousel-caption d-none d-md-block">
                <h4 class="font-weight-bold">Joanne Bloggs</h4>
                <em>"Always so friendly, and efficient. Great value products even more so for home schooling."</em>
            </div>
        </div>
        <div class="carousel-item">
            <img src="{{ MEDIA_URL }}hero_image6.jpg" class="w-100" alt="paper" />
            <div class="carousel-caption d-none d-md-block">
                <h4 class="font-weight-bold">Mr B Oss</h4>
                <em>"Relaible company who deliver all the products every office will need."</em>
            </div>
        </div>
    </div>
</div>
    <!--Paper Pal selling point tags -->
<div class="container-fluid">
    <div class="row justify-content-sm-center justify-content-md-around text-center mt-lg-4 p-4">
        <div class="col-sm-12 col-md-3 mb-2">
            <span class="m-2"> <i class="fas fa-truck text-success"></i> Free Delivery for covid-19 relief </span>
        </div>
        <div class="col-sm-12 col-md-3 mb-2">
            <span class="m-2"> <i class="fas fa-check text-success"></i> High Quality service and products </span>
        </div>
        <div class="col-sm-12 col-md-3 mtb-2">
            <span class="m-2"> <i class="fas fa-shopping-cart text-success"></i> Competitive pricing </span>
        </div>
    </div>
</div>
<!--Links and Displays to New Arrivals and Deals-->
<div class="container">
    <div class="row">
        <div class="col-12 text-center mt-5 mb-5">
            <button id="new-arrivals" class="text-decoration-none btn btn-outline-dark active btn-lg m-3">New Arrivals</button>
            <button id="deals" class="text-decoration-none btn btn-outline-dark btn-lg m-3">Deals</button>
        </div>
    </div>
    <div class="row">
        {% for product in products %} 
        {% if product.category.name == "new_arrivals" %}
        <div class="col-sm-6 col-md-4 col-lg-3 text-center mb-5 new-arrivals-container">
            <div class="card h-100">
                <a href="{% url 'product_details' product.id %}">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" class="card-img-top img-fluid" alt="{{ product.name }}" />
                    {% else %}
                    <img src="{{ MEDIA_URL }}no-image-available.jpg" class="card-img-top img-fluid" alt="{{ product.name }}" />
                    {% endif %}
                </a>
                <div class="card-body bg-info">
                    <h5 class="card-title">{{ product.name }}</h5>
                    {% if product.price %}
                    <div>
                        <p class="lead mb-0 font-weight-bold">£{{ product.price }}</p>
                    </div>
                    {% endif %} 
                    {% if product.category %}
                    <div>
                        <i class="fas fa-tags"> {{ product.category.friendly_name }}</i>
                    </div>
                    {% endif %} 
                    {% if product.rating %}
                    <div>
                        <i class="fas fa-star"> {{ product.rating }}/5</i>
                    </div>
                    {% endif %} 
                    {% if request.user.is_superuser %}
                    <small class="ml-3">
                        <a href="{% url 'edit_product' product.id %}"><i class="fas fa-edit"></i> Edit</a> |
                        <a class="text-danger" href="{% url 'delete_product' product.id %}"><i class="fas fa-times-circle"></i> Delete</a>
                    </small>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %} 
        {% if product.category.name == "deals" %}
        <div class="col-sm-6 col-md-4 col-lg-3 text-center mb-5 d-none deals-container">
            <div class="card h-100">
                <a href="{% url 'product_details' product.id %}">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" class="card-img-top img-fluid" alt="{{ product.name }}" />
                    {% else %}
                    <img src="{{ MEDIA_URL }}no-image-available.png" class="card-img-top img-fluid" alt="{{ product.name }}" />
                    {% endif %}
                </a>
                <div class="card-body bg-info">
                    <h5 class="card-title">{{ product.name }}</h5>
                    {% if product.price %}
                    <div>
                        <p class="lead mb-0 font-weight-bold">£ {{ product.price }}</p>
                    </div>
                    {% endif %} 
                    {% if product.category %}
                    <div>
                        <i class="fas fa-tags"> {{ product.category.friendly_name }}</i>
                    </div>
                    {% endif %} 
                    {% if product.rating %}
                    <div>
                        <i class="fas fa-star"> {{ product.rating }}/5</i>
                    </div>
                    {% endif %} 
                    {% if request.user.is_superuser %}
                    <small class="ml-3">
                        <a href="{% url 'edit_product' product.id %}"><i class="fas fa-edit"></i> Edit</a> |
                        <a class="text-danger" href="{% url 'delete_product' product.id %}"><i class="fas fa-times-circle"></i> Delete</a>
                    </small>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %} 
        {% endfor %}
    </div>
</div>
{% endblock %} 
{% block postloadjs %}
<!--Adding/Removing d-none class on deals and new-arrivals-container with event on click-->
<script>
    $("#deals").click(function () {
        $(".deals-container").removeClass("d-none");
        $(this).addClass("active");
        $(".new-arrivals-container").addClass("d-none");
        $("#new-arrivals").removeClass("active");
    });
    $("#new-arrivals").click(function () {
        $(".new-arrivals-container").removeClass("d-none");
        $(this).addClass("active");
        $(".deals-container").addClass("d-none");
        $("#deals").removeClass("active");
    });
    $(".toast").toast("show");
</script>
{% endblock %}